<!-- pages/question/question.wxml -->
<view class="question-container {{animationClass}}">
  <!-- é¡¶éƒ¨è¿›åº¦åŒºåŸŸ -->
  <view class="progress-section">
    <button class="global-home-btn" bindtap="onExitConfirm">
      <text class="global-home-icon">ğŸ </text>
    </button>
    
    <view class="progress-bar-container">
      <view class="progress-bar">
        <view 
          class="progress-fill" 
          style="width: {{progressPercent}}%"
        >
          <text class="current-question">{{currentIndex + 1}}</text>
        </view>
        <text class="total-questions">{{totalQuestions}}</text>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-section">
    <view class="loading-content">
      <view class="loading-spinner"></view>
      <text class="loading-text">æ­£åœ¨åŠ è½½é¢˜ç›®...</text>
    </view>
  </view>

  <!-- é¢˜ç›®å†…å®¹åŒºåŸŸ -->
  <view wx:else class="question-section">
    <view class="question-content">
      <!-- é¢˜ç›®æ–‡æœ¬ -->
      <view class="question-text-container">
        <text class="question-text">{{currentQuestion.q}}</text>
      </view>

      <!-- é¢˜ç›®å›¾ç‰‡ -->
      <view class="question-image-container" bindtap="onQuestionImageTap">
        <image 
          class="question-image" 
          src="{{currentQuestion.image}}" 
          mode="aspectFit"
        />
        
        <!-- å›¾ç‰‡é®ç½©å’Œæç¤º -->
        <view class="image-overlay {{showAnswers ? 'show' : ''}}">
          <view wx:if="{{!showAnswers}}" class="tap-hint">
            <view class="hint-icon">ğŸ‘†</view>
            <text class="hint-text">ç‚¹å‡»å›¾ç‰‡è¿›è¡ŒæŠ‰æ‹©</text>
          </view>
        </view>

        <!-- ç­”æ¡ˆé€‰é¡¹æµ®å±‚ -->
        <view wx:if="{{showAnswers}}" class="answers-overlay">
          <view class="answers-container">
            <view 
              wx:for="{{['A', 'B', 'C', 'D']}}" 
              wx:key="*this"
              class="answer-option {{selectedAnswer === item ? 'selected' : ''}}"
              data-answer-id="{{currentQuestion.answerVOMap[item].id}}"
              data-answer-key="{{item}}"
              bindtap="onAnswerSelect"
            >
              <view class="answer-label">{{item}}</view>
              <text class="answer-text">{{currentQuestion.answerVOMap[item].a}}</text>
              
              <!-- é€‰ä¸­æ•ˆæœ -->
              <view wx:if="{{selectedAnswer === item}}" class="selected-effect">
                <view class="ripple"></view>
              </view>
            </view>
          </view>
        </view>
      </view>

      <!-- æç¤ºæ–‡æœ¬ -->
      <view wx:if="{{!showAnswers}}" class="question-hint">
        <text class="hint-text">ğŸ’¡ ç‚¹å‡»å›¾ç‰‡åšå‡ºé€‰æ‹©</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨è£…é¥° -->
  <view class="bottom-decoration">
    <view class="decoration-line"></view>
    <view class="decoration-dots">
      <view 
        wx:for="{{totalQuestions}}" 
        wx:key="index"
        class="dot {{index <= currentIndex ? 'active' : ''}}"
      ></view>
    </view>
  </view>


</view>