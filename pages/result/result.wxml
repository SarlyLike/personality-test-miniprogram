<!-- pages/result/result.wxml -->
<view class="result-container {{animationClass}}">
  <!-- 头部装饰 -->
  <view class="header-decoration">
    <view class="decoration-particle particle1"></view>
    <view class="decoration-particle particle2"></view>
    <view class="decoration-particle particle3"></view>
    <view class="decoration-particle particle4"></view>
  </view>

  <!-- 滑动页面容器 -->
  <swiper 
    class="pages-swiper" 
    vertical="{{true}}" 
    indicator-dots="{{false}}" 
    autoplay="{{false}}" 
    current="{{currentPage}}" 
    bindchange="onPageChange"
    duration="{{500}}"
    easing-function="easeInOutCubic"
  >
    <!-- 第一页：专属角色展示 -->
    <swiper-item class="page-item">
      <view class="page-content page-role">
        <!-- 角色标题 -->
        <view class="role-header">
          <view class="title-decoration">
            <view class="decoration-line"></view>
            <text class="page-title">专属角色</text>
            <view class="decoration-line"></view>
          </view>
          <view class="role-name-container">
            <text class="role-name">{{result.role}}</text>
            <view class="role-badge">
              <text class="badge-text">✨ 专属</text>
            </view>
          </view>
        </view>

        <!-- 角色形象 -->
        <view class="role-image-container" bindtap="onRoleImageTap">
          <view class="image-frame">
            <image 
              class="role-image" 
              src="{{result.image}}" 
              mode="aspectFit"
            />
            <view class="image-glow"></view>
          </view>
          <view class="image-overlay">
            <view class="overlay-icon">🔍</view>
            <text class="overlay-text">点击查看大图</text>
          </view>
        </view>

        <!-- 角色座右铭 -->
        <view class="role-sentence-container" bindtap="onCopySentence">
          <view class="quote-decoration">
            <text class="quote-mark left">"</text>
            <text class="role-sentence">{{result.sentence}}</text>
            <text class="quote-mark right">"</text>
          </view>
          <view class="copy-hint">
            <text class="hint-icon">📋</text>
            <text class="hint-text">点击复制座右铭</text>
          </view>
        </view>

        <!-- 下滑提示 -->
        <view class="swipe-hint">
          <view class="hint-content">
            <text class="hint-text">上滑查看性格分析</text>
            <view class="hint-arrow">
              <text class="arrow-icon">↑</text>
            </view>
          </view>
        </view>
      </view>
    </swiper-item>

    <!-- 第二页：性格维度分析 -->
    <swiper-item class="page-item">
      <view class="page-content page-analysis">
        <!-- 分析标题 -->
        <view class="analysis-header">
          <view class="title-decoration">
            <view class="decoration-line"></view>
            <text class="page-title">性格分析</text>
            <view class="decoration-line"></view>
          </view>
          <text class="page-subtitle">基于你的答题情况生成</text>
        </view>

        <!-- 雷达图 -->
        <view class="chart-section" wx:if="{{showChart && matrixData}}">
          <view class="chart-container">
            <view class="chart-background">
              <chart 
                chart-data="{{matrixData}}"
                type="radar"
                width="{{320}}"
                height="{{320}}"
              />
            </view>
          </view>

          <!-- 维度说明 -->
          <view class="dimensions-grid">
            <view 
              wx:for="{{matrixData}}" 
              wx:for-item="value"
              wx:for-index="key"
              wx:key="key"
              class="dimension-card"
            >
              <view class="dimension-header">
                <text class="dimension-name">{{key}}</text>
                <text class="dimension-value">{{value}}/10</text>
              </view>
              <view class="dimension-bar">
                <view 
                  class="dimension-fill" 
                  style="width: {{(value/10)*100}}%"
                ></view>
              </view>
              <view class="dimension-level">
                <text class="level-text">{{value >= 8 ? '优秀' : value >= 6 ? '良好' : value >= 4 ? '一般' : '待提升'}}</text>
              </view>
            </view>
          </view>
        </view>

        <!-- 下滑提示 -->
        <view class="swipe-hint">
          <view class="hint-content">
            <text class="hint-text">上滑查看详细解析</text>
            <view class="hint-arrow">
              <text class="arrow-icon">↑</text>
            </view>
          </view>
        </view>
      </view>
    </swiper-item>

    <!-- 第三页：角色解析和分享 -->
    <swiper-item class="page-item">
      <view class="page-content page-share">
        <!-- 解析标题 -->
        <view class="share-header">
          <view class="title-decoration">
            <view class="decoration-line"></view>
            <text class="page-title">角色解析</text>
            <view class="decoration-line"></view>
          </view>
        </view>

        <!-- 角色描述 -->
        <view class="description-section">
          <view class="description-card">
            <view class="description-icon">📖</view>
            <view class="description-content">
              <text class="description-text">{{result.description}}</text>
            </view>
          </view>
        </view>

        <!-- 分享操作区域 -->
        <view class="actions-section">
          <!-- 第一行：分享和保存按钮 -->
          <view class="action-row">
            <button class="action-btn share-btn" open-type="share">
              <view class="action-icon">🎭</view>
              <view class="action-text">
                <text class="action-title">分享我的角色</text>
                <text class="action-desc">让朋友看看我是谁</text>
              </view>
            </button>
            
            <button class="action-btn save-btn" bindtap="onSaveImage">
              <view class="action-icon">💾</view>
              <view class="action-text">
                <text class="action-title">保存图片</text>
                <text class="action-desc">保存到相册</text>
              </view>
            </button>
          </view>

          <!-- 第二行：重测和更多测试按钮 -->
          <view class="action-row">
            <button class="action-btn retest-btn" bindtap="onRetakeTest">
              <view class="action-icon">🔄</view>
              <view class="action-text">
                <text class="action-title">重新测试</text>
                <text class="action-desc">再试一次</text>
              </view>
            </button>
            
            <button class="action-btn more-btn" bindtap="onViewOtherTests">
              <view class="action-icon">🎯</view>
              <view class="action-text">
                <text class="action-title">更多测试</text>
                <text class="action-desc">探索其他</text>
              </view>
            </button>
          </view>
        </view>

        <!-- 底部提示 -->
        <view class="bottom-tips">
          <text class="tip-item">🌟 每个人都有独特的人格魅力</text>
          <text class="tip-item">🎯 测试结果仅供娱乐参考</text>
        </view>
      </view>
    </swiper-item>
  </swiper>

  <!-- 页面指示器 -->
  <view class="page-indicators">
    <view 
      wx:for="{{3}}" 
      wx:key="index"
      class="indicator {{currentPage === index ? 'active' : ''}}"
      data-page="{{index}}"
      bindtap="onIndicatorTap"
    ></view>
  </view>

  <!-- 返回首页浮动按钮 -->
  <view class="floating-home-btn" bindtap="onBackHome">
    <text class="home-icon">🏠</text>
  </view>
</view>